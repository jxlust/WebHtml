<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .bbox {
            display: flex;
            flex-flow: wrap;
            width: 1000px;
            align-items: center;
            justify-content: space-between;
            margin: 0 auto;
        }

        .bbox span {
            width: 200px;
            height: 100px;
            margin-bottom: 20px;
            background-color: #999;
        }

        .good-cars {
            position: fixed;
            top: 300px;
            right: 10px;
            width: 100px;
            height: 40px;
            background-color: #eeeeee;
        }
        .u-flyer{
            opacity: .5;
        }
    </style>
</head>

<body>
    <p class="bbox">
        <span>
            商品1
        </span>

        <span>
            商品1
        </span>
        <span>
            商品1
        </span>
        <span>
            商品1
        </span>
        <span>
            商品1
        </span>
        <span>
            商品1
        </span>

        <span>
            商品1
        </span>
        <span>
            商品1
        </span>
        <span>
            商品1
        </span>
        <span>
            商品1
        </span>
    </p>

    <div class="good-cars">
        购物车
        <span id="end">END</span>
    </div>


    <script src="../js/jquery-2.2.2.min.js"></script>
    <script src="../js/fly.js"></script>
    <script>
        /////抛物效果开始

        $("p.bbox span").click(function (event) {
            var oshen = $(this).hasClass("shengji");
            // 获取购物车盒子
            var Oulli = $(".good-cars");
            // 获取价格
            // var a0 = $.trim($(this).parents(".pinbox").find("ul.jia span.jia").html());
            var a0 = '100';
            // 获取价格
            // var a1 = $.trim($(this).parents(".pinbox").find("h3 a").html());
            var a1 = '200';
            // 获取价格
            // var srcimg = $.trim($(this).parents(".pinbox").find("div.imgbox a img").attr("src"));
            var srcimg = 'http://static.dev.3d66.com/user/images/defaultHead.jpg';
            // 获取购物车中已经存在的商品名称数组

            // var Ochild = creatli(a0, a1, srcimg);
            // Oulli.append(Ochild);
            // shezhitongji();
            // $(this).addClass("shengji");
            // $(this).html("已选择");

            // 以下是飞入的效果实现
            var offset = $("#end").offset(); // 终点位置
            var addcar = $(this);
            // var img = addcar.parents(".pinbox").find('img').attr('src');
            var flyer = $('<img class="u-flyer" src="' + srcimg + '">');
            var Oscrolltop = $(document).scrollTop();
            flyer.fly({
                start: {
                    left: event.pageX, //开始位置（必填）#fly元素会被设置成position: fixed 
                    top: event.pageY - Oscrolltop - 30, //开始位置（必填） 
                },
                end: {
                    left: offset.left + 10, //结束位置（必填） 
                    top: offset.top + 10 - Oscrolltop, //结束位置（必填） 
                    width: 0, //结束时宽度 
                    height: 0 //结束时高度 
                },
                onEnd: function () { //结束回调 
                    this.destory(); //移除dom 
                }
            });


        });
        /////抛物效果结束
    </script>
</body>

</html>