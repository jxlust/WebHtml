<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./dhtmlxgantt.css" />
    <script src="./dhtmlxgantt.js"></script>
    <script src="../js/test-data.js"></script>
    <style>
      body,
      html {
        padding: 0;
        margin: 0;
      }
      .container {
        width: 100vw;
        height: 100vh;
      }
    </style>
  </head>
  <body>
    <div id="app" class="container"></div>
  </body>
  <script>
    gantt.templates.date_grid = function (date, task) {
      if (!date) {
        return "";
      }
      return gantt.templates.grid_date_format(date);
    };

    gantt.config.date_format = "%Y-%m-%d %H:%i:%s";

    gantt.config.scale_height = 60;
    gantt.config.scale_height = 50;

    gantt.config.scales = [
      { unit: "month", format: "%Y年%F" },
      { unit: "day", step: 1, format: "%j 周%D" },
    ];
    gantt.config.show_tasks_outside_timescale = true;
    gantt.config.start_date = new Date(2023, 1, 1);
    gantt.config.end_date = new Date(2023, 2, 1);
    gantt.init("app");

    // time_format
    gantt.parse({
      data: [
        {
          id: 11,
          text: "Project #1",
          start_date: null,
          duration: 0,
          type: "project",
          progress: 0.6,
          open: true,
        },

        {
          id: 12,
          text: "Task #1",
          start_date: "2023-01-03",
          duration: 5,
          parent: 11,
          progress: 1,
          open: true,
        },
        {
          id: 13,
          text: "Task #2",
          start_date: "2023-02-03",
          type: "project",
          parent: 11,
          progress: 0.5,
          open: true,
        },
        {
          id: 14,
          text: "Task #3",
          start_date: "2023-03-02",
          duration: 6,
          parent: 11,
          progress: 0.8,
          open: true,
        },
        {
          id: 15,
          text: "Task #4",
          start_date: null,
          duration: 0,
          type: "project",
          parent: 11,
          progress: 0.2,
          open: true,
        },

        {
          id: 17,
          text: "Task #2.1",
          start_date: "2023-02-03",
          duration: 2,
          parent: 13,
          progress: 1,
          open: true,
        },
        {
          id: 18,
          text: "Task #2.2",
          start_date: "2023-02-06",
          duration: 3,
          parent: 13,
          progress: 0.8,
          open: true,
        },
        {
          id: 19,
          text: "Task #2.3",
          start_date: "2023-02-10",
          duration: 4,
          parent: 13,
          progress: 0.2,
          open: true,
        },
        {
          id: 20,
          text: "Task #2.4",
          start_date: "2023-02-15",
          duration: 4,
          parent: 13,
          progress: 0,
          open: true,
        },
        {
          id: 21,
          text: "Task #4.1",
          start_date: "2023-02-03",
          duration: 4,
          parent: 15,
          progress: 0.5,
          open: true,
        },
        {
          id: 22,
          text: "Task #4.2",
          start_date: "2023-02-08",
          duration: 4,
          parent: 15,
          progress: 0.1,
          open: true,
        },
      ],
      links: [
        { id: 1, source: 17, target: 18, type: "0" },
        { id: 2, source: 18, target: 19, type: "0" },
        { id: 3, source: 19, target: 20, type: "0" },
        { id: 4, source: 21, target: 22, type: "0" },
      ],
    });
  </script>
</html>
